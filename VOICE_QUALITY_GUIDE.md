# راهنمای بهبود کیفیت صدای گوینده

## پارامترهای کنترل کیفیت صدا

### Temperature (دما)
- **محدوده**: 0.0 تا 1.0
- **پیش‌فرض**: 0.75
- **توضیح**: 
  - مقادیر پایین‌تر (0.0-0.3): صدای ثابت و طبیعی‌تر، کمتر خلاقانه
  - مقادیر متوسط (0.5-0.7): تعادل بین طبیعی‌بودن و تنوع
  - مقادیر بالاتر (0.8-1.0): صدای خلاقانه‌تر و متنوع‌تر، اما ممکن است کمتر پایدار باشد

### Top_P (Nucleus Sampling)
- **محدوده**: 0.0 تا 1.0
- **پیش‌فرض**: 0.85
- **توضیح**:
  - مقادیر پایین‌تر (0.5-0.7): صدای محدودتر و تکراری‌تر
  - مقادیر متوسط (0.8-0.9): تنوع طبیعی و باز
  - مقادیر بالاتر (0.95-1.0): تنوع بیشتر، اما ممکن است غیرطبیعی شود

## توصیه‌های استفاده

### برای صدای طبیعی‌تر و باز‌تر:
```
temperature: 0.75-0.85
top_p: 0.85-0.95
```

### برای صدای ثابت و پایدار:
```
temperature: 0.3-0.5
top_p: 0.7-0.8
```

### برای صدای خلاقانه و متنوع:
```
temperature: 0.85-1.0
top_p: 0.9-1.0
```

## مثال‌های استفاده

### cURL - صدای طبیعی‌تر:
```bash
curl -X POST http://localhost:5000/voice-clone \
  -F "audio=@speaker.wav" \
  -F "text=سلام، چطور می‌تونم کمکتون کنم؟" \
  -F "language=fa" \
  -F "temperature=0.8" \
  -F "top_p=0.9" \
  -o output.wav
```

### Python - صدای ثابت:
```python
import requests

files = {
    'audio': open('speaker.wav', 'rb'),
    'text': (None, 'سلام، چطور می‌تونم کمکتون کنم؟'),
    'language': (None, 'fa'),
    'temperature': (None, '0.5'),
    'top_p': (None, '0.75'),
}

response = requests.post('http://localhost:5000/voice-clone', files=files)
with open('output.wav', 'wb') as f:
    f.write(response.content)
```

## نکات مهم

1. **Temperature بالاتر** = صدای **باز‌تر و طبیعی‌تر** (اما کمتر پایدار)
2. **Top_P بالاتر** = **تنوع بیشتر** در انتخاب کلمات و تن صدا
3. ترکیب بهینه برای صدای طبیعی: `temperature=0.75-0.85` و `top_p=0.85-0.95`
4. اگر صدا خسته‌ای شنیده می‌شود، temperature را بالاتر ببرید
5. اگر صدا بیش‌ازحد متنوع است، temperature و top_p را کاهش دهید

## تنظیم‌های پیشنهادی

| وضعیت | Temperature | Top_P | توضیح |
|------|------------|-------|--------|
| صدای خسته | 0.8-0.9 | 0.9 | باز‌تر و طبیعی‌تر |
| صدای عادی | 0.75 | 0.85 | تعادل خوب |
| صدای ثابت | 0.4-0.5 | 0.75 | کمتر متغیر |
| صدای پویا | 0.9-1.0 | 0.95 | بیشتر متنوع |
